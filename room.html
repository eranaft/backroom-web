<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>BACKROOM</title>
  <link rel="stylesheet" href="/ui.css?v=1" />
</head>
<body>
  <!-- layers -->
  <div class="bg"></div>
  <div class="aura"></div>
  <canvas id="stars" aria-hidden="true"></canvas>
  <div class="neonSheen" aria-hidden="true"></div>
  <div class="vignette" aria-hidden="true"></div>

  <div class="app" id="app">
    <!-- top nav -->
    <header class="top">
      <div class="brand" aria-hidden="true">
        <span class="brandText">BACKROOM</span>
      </div>

      <nav class="nav" aria-label="Навигация">
        <button class="navItem isActive" data-route="library">БИБЛИОТЕКА</button>
        <button class="navItem" data-route="player">ПЛЕЕР</button>
        <button class="navItem" data-route="game">ИГРА</button>

        <!-- exit icon inline in the same row -->
        <button class="navExit" id="exitBtn" aria-label="Выход" title="Выход">
          <!-- exit icon -->
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M10 17l1.41-1.41L8.83 13H20v-2H8.83l2.58-2.59L10 7l-7 7 7 7z"></path>
          </svg>
        </button>
      </nav>
    </header>

    <!-- pages -->
    <main class="stage" id="stage">
      <!-- LIBRARY -->
      <section class="page isActive" data-page="library">
        <div class="card glass">
          <div class="cardHead">
            <div>
              <div class="kicker">Кассеты</div>
              <div class="h1">Библиотека</div>
            </div>

            <input id="search" class="search" type="search" placeholder="Поиск…" />
          </div>

          <div id="list" class="list"></div>
        </div>
      </section>

      <!-- PLAYER -->
      <section class="page" data-page="player">
        <div class="card glass">
          <div class="playerTop">
            <div>
              <div class="kicker">Сейчас</div>
              <div id="pTitle" class="h2">—</div>
              <div id="pHint" class="muted">KRAMSKOY • BACKROOM</div>
            </div>

            <div class="rightPills">
              <span id="windowBadge" class="badge">window: —</span>
            </div>
          </div>

          <div class="playerGrid">
            <div class="panel glassSoft">
              <div class="panelTitle">Описание</div>
              <div id="pDesc" class="desc">Выбери трек в библиотеке.</div>

              <div class="links">
                <button class="chip" id="yandexBtn" type="button">YANDEX</button>
                <button class="chip" id="spotifyBtn" type="button">SPOTIFY</button>
              </div>
            </div>

            <div class="panel glassSoft">
              <div class="panelTitle">Тайминги</div>
              <div id="chapters" class="chapters"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- GAME -->
      <section class="page" data-page="game">
        <div class="card glass">
          <div class="kicker">Игра</div>
          <div class="h1">В разработке</div>
          <p class="desc">
            “Твоя победа — моя песня”.<br/>
            Здесь будет вход в игру и прогресс разработки.
          </p>
        </div>
      </section>
    </main>

    <!-- MINI PLAYER -->
    <footer class="mini glass" id="mini">
      <!-- progress inside player, not over controls -->
      <div class="miniProg" id="scrub" aria-label="Прогресс" role="slider">
        <div class="miniTrack"></div>
        <div class="miniFill" id="prog"></div>
        <div class="miniKnob" id="knob"></div>
      </div>

      <div class="miniLeft">
        <div id="mName" class="miniName">No track</div>
        <div id="mHint" class="miniHint">—</div>
      </div>

      <div class="miniCtrls">
        <button class="iconBtn" id="prev" aria-label="Назад" title="Назад">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 6h2v12H6V6zm3.5 6l10 6V6l-10 6z"/></svg>
        </button>

        <button class="iconBtn main" id="toggle" aria-label="Play/Pause" title="Play/Pause">
          <!-- play -->
          <svg class="ico playIco" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"/></svg>
          <!-- pause -->
          <svg class="ico pauseIco" viewBox="0 0 24 24" aria-hidden="true"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
        </button>

        <button class="iconBtn" id="next" aria-label="Вперёд" title="Вперёд">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M16 6h2v12h-2V6zM7 18l10-6L7 6v12z"/></svg>
        </button>
      </div>

      <audio id="audio" preload="metadata"></audio>
    </footer>
  </div>

  <script>
    // сервер стейта
    window.API_BASE = "https://backroom-server.onrender.com";
  </script>
  <script src="/ui.js?v=1" defer></script>
</body>
</html>
